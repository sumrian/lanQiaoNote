num.replace(/\d(?=(\d{3})+$)/g,`$&,`)
// 你提出了一个很好的问题。你说得对,/\d/本身只能匹配一个单独的数字字符。

// 但是在这个正则表达式中,/\d/是作为一个组成部分被使用的,
// 它被放在了一个正向预查断言(?=(\d{3})+$)的里面。

// 正向预查断言的作用是检查当前位置后面是否匹配括号里的模式,
// 但不会实际消耗掉那些字符。也就是说,/\d/会匹配到一个数字字符
// ,然后正向预查断言会检查后面是否有一个或多个3位数字组合,如果满足条件,那么整个模式就会被匹配到。

// 所以在字符串"12345678"中,/\d/会依次匹配到1、2、3、4、5、6、7、8这些数字字符,
// 而正向预查断言会检查每个位置后面是否有3位数字,直到匹配到最后3位数字"678"为止。

// 总的来说,/\d/本身只匹配单个数字,但是在这个正则表达式的整体结构中,
// 它能够匹配到多个数字,因为它是作为正向预查断言的一部分被使用的。